<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../partials/head', { title: title }) %>
</head>

<body>
  <a class="skip-link" href="#main-content">Skip to content</a>
  <div class="page">
    <%- include('../partials/header') %>
      <%- include('../partials/nav', { nav: nav }) %>

        <main id="main-content">
          <h1>
            <%= title %>
          </h1>

          <p class="notice">Classification name must not contain spaces or special characters.</p>

          <!-- Flash message -->
          <% if (locals.notice) { %>
            <div class="flash notice">
              <%= notice %>
            </div>
            <% } %>

              <!-- Server-side validation errors -->
              <% if (locals.errors) { %>
                <ul class="errors">
                  <% errors.forEach(error=> { %>
                    <li>
                      <%= error.msg %>
                    </li>
                    <% }) %>
                </ul>
                <% } %>

                  <form id="add-classification-form" action="/inv/add-classification" method="POST">
                    <label for="classification_name">Classification Name:</label>
                    <input type="text" id="classification_name" name="classification_name" required
                      pattern="^[A-Za-z0-9]+$" title="No spaces or special characters allowed."
                      value="<%= locals.classification_name || '' %>">

                    <button type="submit">Add Classification</button>
                  </form>
        </main>

        <%- include('../partials/footer') %>
  </div>

  <script>
    // Client-side validation
    document.getElementById('add-classification-form').addEventListener('submit', (e) => {
      const input = document.getElementById('classification_name')
      const pattern = /^[A-Za-z0-9]+$/
      if (!pattern.test(input.value.trim())) {
        e.preventDefault()
        alert('Classification name must not contain spaces or special characters.')
      }
    })
  </script>
  <script src="/js/script.js" defer></script>
</body>

</html>
