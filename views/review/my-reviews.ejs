<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head', { title }) %>
</head>

<body>
    <a class="skip-link" href="#main-content">Skip to content</a>
    <div class="page">
        <%- include('../partials/header') %>
            <%- include('../partials/nav', { nav }) %>

                <main id="main-content">
                    <h1>
                        <%= title %>
                    </h1>

                    <% if (locals.notice) { %>
                        <div class="flash notice">
                            <%= notice %>
                        </div>
                        <% } %>

                            <% if (reviews && reviews.length> 0) { %>
                                <ul class="my-reviews-list">
                                    <% reviews.forEach(review=> { %>
                                        <li class="my-review-item">
                                            <div class="review-vehicle">
                                                <h3>
                                                    <a href="/inv/detail/<%= review.inventory_id %>">
                                                        <%= review.inv_year %>
                                                            <%= review.inv_make %>
                                                                <%= review.inv_model %>
                                                    </a>
                                                </h3>
                                            </div>
                                            <div class="review-content">
                                                <div class="review-rating">
                                                    <% for(let i=1; i <=5; i++) { %>
                                                        <% if(i <=review.review_rating) { %>
                                                            ★
                                                            <% } else { %>
                                                                ☆
                                                                <% } %>
                                                                    <% } %>
                                                </div>
                                                <p class="review-text">
                                                    <%= review.review_text %>
                                                </p>
                                                <p class="review-date">Posted on <%= new
                                                        Date(review.review_date).toLocaleDateString() %>
                                                </p>
                                            </div>
                                            <div class="review-actions">
                                                <a href="/review/edit/<%= review.review_id %>" class="btn-edit">Edit</a>
                                                <a href="/review/delete/<%= review.review_id %>"
                                                    onclick="return confirm('Are you sure you want to delete this review?')"
                                                    class="btn-delete">Delete</a>
                                            </div>
                                        </li>
                                        <% }) %>
                                </ul>
                                <% } else { %>
                                    <p>You haven't written any reviews yet.</p>
                                    <p><a href="/">Browse vehicles</a> and share your experience!</p>
                                    <% } %>
                </main>

                <%- include('../partials/footer') %>
    </div>
    <script src="/js/script.js" defer></script>
</body>

</html>